<div class="admin-products-container">

  <!-- Forma za dodavanje / izmenu proizvoda -->
  <div class="product-form">
    <h3>{{ editingProduct ? '✏️ Izmeni proizvod' : '➕ Dodaj novi proizvod' }}</h3>

    <form [formGroup]="productForm" (ngSubmit)="submit()">
      <div class="form-row">
        <input formControlName="name" placeholder="Naziv proizvoda" />
        <input formControlName="description" placeholder="Opis proizvoda" />
        <input formControlName="price" type="number" step="0.01" placeholder="Cena (RSD)" />
        <input formControlName="stock" type="number" placeholder="Na stanju" />
        <input formControlName="imageUrl" placeholder="URL slike" />
        <button type="submit" [disabled]="productForm.invalid">
          {{ editingProduct ? '💾 Sačuvaj' : '➕ Dodaj proizvod' }}
        </button>
        <button type="button" (click)="cancelEdit()" *ngIf="editingProduct">❌</button>
      </div>
    </form>
  </div>

  <!-- Sortiranje -->
  <mat-form-field appearance="fill">
    <mat-label>Sortiraj po</mat-label>
    <mat-select [(value)]="sort" (selectionChange)="loadProducts()">
      <mat-option value="id,asc">ID (rastuće)</mat-option>
      <mat-option value="id,desc">ID (opadajuće)</mat-option>
      <mat-option value="name,asc">Naziv (A-Z)</mat-option>
      <mat-option value="name,desc">Naziv (Z-A)</mat-option>
      <mat-option value="price,asc">Cena (rastuće)</mat-option>
      <mat-option value="price,desc">Cena (opadajuće)</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Lista proizvoda -->
  <div class="product-list">
    <h3>📦 Lista proizvoda</h3>

    <div class="product-header">
      <span class="img-col">Slika</span>
      <span class="name-col">Naziv</span>
      <span class="desc-col">Opis</span>
      <span class="price-col">Cena</span>
      <span class="stock-col">Na stanju</span>
      <span class="actions-col">Akcije</span>
    </div>

    <div class="product-row" *ngFor="let p of products">
      <img [src]="p.imageUrl || 'assets/no-image.png'" alt="{{p.name}}" />
      <span class="name">{{ p.name }}</span>
      <span class="desc">{{ p.description }}</span>
      <span class="price">{{ p.price }} RSD</span>
      <span class="stock">{{ p.stock }}</span>
      <div class="row-buttons">
        <button (click)="edit(p)">✏️</button>
        <button (click)="delete(p.id)">🗑️</button>
      </div>
    </div>
  </div>

  <!-- Paginacija -->
  <mat-paginator
    [length]="totalElements"
    [pageSize]="pageSize"
    [pageSizeOptions]="[5, 10, 20]"
    (page)="changePage($event)">
  </mat-paginator>
</div>
