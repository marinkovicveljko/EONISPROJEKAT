<div *ngIf="filteredProducts.length > 0; else nemaProizvoda" class="product-grid">

  <div *ngFor="let p of filteredProducts" class="product-card">

    <!-- Slika proizvoda -->
    <img [src]="p.imageUrl || 'assets/placeholder.png'" 
         alt="{{ p.name }}" 
         class="product-img" />

    <!-- Naziv -->
    <h3 class="product-title">{{ p.name }}</h3>

    <!-- Opis -->
    <p class="product-desc">{{ p.description }}</p>

    <!-- Cena -->
    <p class="product-price">{{ p.price | currency:'RSD':'symbol':'1.0-0' }}</p>

    <!-- Dugmad -->
    <div class="product-actions">
      <button [routerLink]="['/products', p.id]" class="btn btn-dark">
        Detalji
      </button>
      <button (click)="addToCart(p)" class="btn btn-primary">
        ðŸ›’ Dodaj u korpu
      </button>
    </div>

  </div>
</div>

<ng-template #nemaProizvoda>
  <p class="no-products">Nema dostupnih proizvoda.</p>
</ng-template>

<!-- âœ… Paginacija + sortiranje -->
<div class="paginator-container">
  <mat-form-field>
    <mat-label>Sortiraj po</mat-label>
    <mat-select (selectionChange)="changeSort($event.value)">
      <mat-option value="id,asc">ID (rastuce)</mat-option>
      <mat-option value="id,desc">ID (opadajuce)</mat-option>
      <mat-option value="price,asc">Cena (najniÅ¾a)</mat-option>
      <mat-option value="price,desc">Cena (najviÅ¡a)</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-paginator [length]="totalElements"
                 [pageSize]="size"
                 [pageSizeOptions]="[6, 12, 24]"
                 (page)="changePage($event)">
  </mat-paginator>
</div>
