<div class="checkout-wrapper">
  <!-- Spinner -->
  <div *ngIf="loading" class="spinner-overlay">
    <mat-spinner></mat-spinner>
  </div>

  <!-- Forma -->
  <mat-card class="checkout-form">
    <h2 class="checkout-title">üõçÔ∏è Zavr≈°etak kupovine</h2>

    <form #checkoutForm="ngForm" (ngSubmit)="onSubmit()" class="form-grid">
      <mat-form-field appearance="outline">
        <mat-label>Adresa</mat-label>
        <input matInput [(ngModel)]="order.street" name="street" required>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Grad</mat-label>
        <input matInput [(ngModel)]="order.city" name="city" required>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Po≈°tanski broj</mat-label>
        <input matInput [(ngModel)]="order.postalCode" name="postalCode" required>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Dr≈æava</mat-label>
        <input matInput [(ngModel)]="order.country" name="country" required>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Napomena (opciono)</mat-label>
        <textarea matInput [(ngModel)]="order.note" name="note"></textarea>
      </mat-form-field>

      <!-- Stripe Card Element -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label></mat-label>
        <input matInput style="display:none"> <!-- trik za mat-form-field -->
        <div id="card-element" class="stripe-card" style="padding:10px; border:1px solid #ccc; border-radius:5px;"></div>
      </mat-form-field>

      <div id="card-errors" role="alert" style="color:red; margin:10px 0;"></div>

      <button mat-raised-button color="primary" class="confirm-btn"
              [disabled]="checkoutForm.invalid || loading">
        ‚úÖ Potvrdi porud≈æbinu
      </button>
    </form>
  </mat-card>

  <!-- Korpa -->
  <mat-card class="checkout-summary" *ngIf="cartService.getItems().length > 0">
    <h3>üõí Moja korpa</h3>
    <mat-list>
      <mat-list-item *ngFor="let item of cartService.getItems()">
        <div class="item-details">
          <p><strong>{{ item.product.name }}</strong> (x{{ item.quantity }})</p>
          <p>{{ item.product.price * item.quantity }} RSD</p>
        </div>
      </mat-list-item>
    </mat-list>
    <h3 class="total">Ukupno: {{ getTotal() }} RSD</h3>
  </mat-card>
</div>
